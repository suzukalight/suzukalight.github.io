{"componentChunkName":"component---src-components-templates-blog-post-source-github-js","path":"/2019-07-14-deploy-circleci/","webpackCompilationHash":"9d92a21a48f2254cf2ed","result":{"data":{"site":{"siteMetadata":{"title":"suzukalight.com","author":"suzukalight"}},"markdownRemark":{"id":"0875cef2-8995-51b7-b636-019fc8161755","excerpt":"GitHub に CircleCI を設置しておき、Contentful の webhook 機能から記事の更新をトリガして、CI による GitHub Pages への自動デプロイができるようにする方法を紹介します。前回、Contentful による Gatsby…","html":"<p>GitHub に CircleCI を設置しておき、Contentful の webhook 機能から記事の更新をトリガして、CI による GitHub Pages への自動デプロイができるようにする方法を紹介します。</p>\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://suzukalight.com/2019-07-13-contentful-starter/\" data-iframely-url=\"//cdn.iframe.ly/JcHxZbj?omit_script=1&iframe=card-small\"></a></div></div>\n<p>前回、Contentful による Gatsby サイトのハンズオンを行いました。しかしながらこのままだと Contentful で記事を更新しても、コンテンツサーバ側は更新できません。Gatsby に SSG してもらい、それをサーバにデプロイする必要があります。</p>\n<p>Contenful には webhook 機能があり、記事の更新時などにトリガさせることができます。この webhook によって CircleCI を起動させ、CircleCI に <code class=\"language-text\">yarn deploy</code> を行わせることで、自動的に GitHub Pages へデプロイすることを狙いとしています。</p>\n<h1 id=\"circleci-の設置と動作確認\"><a href=\"#circleci-%E3%81%AE%E8%A8%AD%E7%BD%AE%E3%81%A8%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"circleci の設置と動作確認 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCI の設置と動作確認</h1>\n<h2 id=\"サインアップ\"><a href=\"#%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97\" aria-label=\"サインアップ permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サインアップ</h2>\n<p><a href=\"https://circleci.com/signup/\" target=\"_blank\" rel=\"noopener\">https://circleci.com/signup/</a></p>\n<ul>\n<li>GitHubアカウントでサインアップ</li>\n<li><code class=\"language-text\">Follow a Project</code> -> study-gatsby-contentful</li>\n</ul>\n<h2 id=\"ブログリポジトリにci設定\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%ABci%E8%A8%AD%E5%AE%9A\" aria-label=\"ブログリポジトリにci設定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログリポジトリにCI設定</h2>\n<ul>\n<li>study-gatsby-contentful を <code class=\"language-text\">Set Up Project</code></li>\n<li>config.yml のテンプレートをコピー</li>\n</ul>\n<h2 id=\"リポジトリのファイルを更新\"><a href=\"#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%9B%B4%E6%96%B0\" aria-label=\"リポジトリのファイルを更新 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リポジトリのファイルを更新</h2>\n<ul>\n<li><code class=\"language-text\">.circleci/config.yml</code> として、上のテンプレートを保存</li>\n<li><code class=\"language-text\">package.json</code> の <code class=\"language-text\">test</code> を <code class=\"language-text\">yarn lint</code> に変更（動作確認用）</li>\n</ul>\n<div class=\"gatsby-code-title\">package.json</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"yarn lint\"</span><span class=\"token punctuation\">,</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>上記2つの変更についてコミット</li>\n</ul>\n<h2 id=\"ciの動作確認\"><a href=\"#ci%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\" aria-label=\"ciの動作確認 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CIの動作確認</h2>\n<ul>\n<li><code class=\"language-text\">Start building</code> で開始！</li>\n<li>テストが成功したかを確認</li>\n</ul>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 843px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.5338078291815%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVQoz5WRvU4CQRSF5wkIBT+10tCpLQkPYEcoBAMCLY0aG0sfAdwFNggU0tgYH8KEQGJi7JEYE4EAuy7ssj+wkOPMKEZj407y5dw5N/fO7r3kJJvGfjSCrVAIe7s7CAT88Pl88Pv9CAaD9B74vjO8Xi/C4TAikQg8Hg/3WH4DScRiOM7nIV1VIVUlCGURl6IAQRBQLpc5LBZFEaVSice1Wg31ep17LM98kcKUHGWyaDQa4MdwPnUFqKoK27axWNg0nkLTNMznc+i6zv1NnsF9ClPS6z6j9/qCi841zls1nN1LKDzeYkYbsKJNoWVZv+Ceaf3xSafVRvvpAds3OQSaCfiaB4jencJQZDiOg+VyCTeHZLM5VCoVKOYMg+kEMtWZpWNNG63Xa85qtfo3JENnKEkS5pqO8XAEeTTGoD+ArCgwDIPPxQ0klUqjQjdl0uL3r5kx/bkEVw2TyUO+fmNh8WLTNPmXsa0xdQuJx+MoFIvozvp4U0bQbAOyrmKoTviLbn/7A0gUnqEJDbHcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"complete ci\"\n        title=\"\"\n        src=\"/static/48f00146e96575abae77826967064fd6/b28c0/complete-ci.png\"\n        srcset=\"/static/48f00146e96575abae77826967064fd6/01387/complete-ci.png 320w,\n/static/48f00146e96575abae77826967064fd6/e49a9/complete-ci.png 640w,\n/static/48f00146e96575abae77826967064fd6/b28c0/complete-ci.png 843w\"\n        sizes=\"(max-width: 843px) 100vw, 843px\"\n      />\n  </span></p>\n<h2 id=\"personal-api-token-を入手\"><a href=\"#personal-api-token-%E3%82%92%E5%85%A5%E6%89%8B\" aria-label=\"personal api token を入手 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Personal API Token を入手</h2>\n<ul>\n<li>\n<p>User -> Personal API Tokens -> <code class=\"language-text\">Create New Token</code></p>\n<ul>\n<li>適当な名前（Contentfulなど）を入力し、APIトークンを生成</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"contentful-の初期設定\"><a href=\"#contentful-%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\" aria-label=\"contentful の初期設定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contentful の初期設定</h1>\n<h2 id=\"contentful-に-webhook-を追加\"><a href=\"#contentful-%E3%81%AB-webhook-%E3%82%92%E8%BF%BD%E5%8A%A0\" aria-label=\"contentful に webhook を追加 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contentful に webhook を追加</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">Settings -&gt; Webhooks</code></p>\n<ul>\n<li>右側の Webhook templates から <code class=\"language-text\">CircleCI</code> を <code class=\"language-text\">Add</code></li>\n<li>必要な情報を入力して、 <code class=\"language-text\">Create webhook</code></li>\n</ul>\n</li>\n</ul>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 827px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 96.9770253929867%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADCklEQVQ4y51UTW/TQBDNj+fEhRMXDnwItVCEEEmjpqkTkraqBBQV2iIhKqTSJm0Sf3/u2l7bj5l1HFKkXljpyd71+u17M7PTevDwEXYHI7zr9PC+u4vtnqHnjJ5Ro5nfB95jjA7w+MkztA6OPqKsKvhhDC8IEScS/zt+XPxCyxiOkWU5kQVIswyqKCDTDFmew7Rs2I6LgtZymudK6e/r4G+8l8do/xCt55tv8OnbGX5eXmtMFhampk1KE0gp4TgOEnqPohhpmqIsS02iiLw5iNd47BlDtAbdNkprgpnlwvNDRHECQT+yaiEEptMpFqYJ07QIJubzOWGhD4ppb0DO+GAexuADWsP+LkrfIiJBSoQ+uaITBW3KKAT8o+/7cD0Pruvqn1OZ6m8NJAng0e2Twu7oC+YKCH1PJybPlY6JZdtaQRhGpCLU73wIx7GiJK6PZt43SOGLl5s4Pv4MkcRwSY2UpHJJyPEJiDBbxqlYovwHnBwegyERttsd3F79hoh8+PYcaRIgz1LYRMhEguwxOPOptleD15SqiZqk6BiO9w1ktB5yHfoBZa7UcbS15Rg+2Q3CUJOw3cbiOu4Qtl9tIL44ofjVpcEjX7PMazElK4oSrai8Y7talZEmZMu9fg95tCA1cllnlSZihSmVTmOxtvx33qi6o5AJh3sD5K6DkBQIIbXdhjAiywnV4n2ZbVCsEx52doDJDD6VhRRyZblJSkJrBanWsdU3pFhZbyyrdcvjbSK8uYXLtcYxrGrLlmVpQknZZNK6iHO9Vt/dak3tmsKdThfeZArHC/XVq9UUlN0AthfjZuHi1vTgBAm8SCIUlCiGVEiyklDod1Uts/x04zWOTk6QiwCRZ0JSPVaFQixSzF2BiRlQswhwvQhwNQ9wOfPp6dG3GE6YwQ5SWL5ERLdvOBqT5a23wPl3JJRhlaUrK3VbYmJqaaSaFXC9pgRFDhXFNFc1sryO4enZOVqdzS1YX09xdTPDDWFBrct1PXpauhdyc+Cm4C2bA4M7DBd7uASHh1vcweER/gAzHJqxnTb2hAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"webhook templates\"\n        title=\"\"\n        src=\"/static/70fa09eeb81eca8b0920478572f674fe/e60a7/webhook-templates.png\"\n        srcset=\"/static/70fa09eeb81eca8b0920478572f674fe/01387/webhook-templates.png 320w,\n/static/70fa09eeb81eca8b0920478572f674fe/e49a9/webhook-templates.png 640w,\n/static/70fa09eeb81eca8b0920478572f674fe/e60a7/webhook-templates.png 827w\"\n        sizes=\"(max-width: 827px) 100vw, 827px\"\n      />\n  </span></p>\n<h2 id=\"コンテンツを変更し、ciが起動するかチェック\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%80%81ci%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E3%81%8B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF\" aria-label=\"コンテンツを変更し、ciが起動するかチェック permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンテンツを変更し、CIが起動するかチェック</h2>\n<p>適当なコンテンツを変更してみて、Webhookが起動し、CircleCIのテストが走るかを確認；</p>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1021px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.87855044074437%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1UlEQVQoz22Q32+aUBzF+U80/njwYY36MLu0S0y2LPsvl3Xpyx5qzF6M1r3UVQR03ZYlJlQ6UTsLpcBFEBE4u1ymcclu+OTcw/feEw7cSe05asc1HB09Qz6fZxSLRRQKBWSzWVQqFdTrdWQyGeRyOZRKJZTLZXamWq2iSM+9fvsGr16eov7iGJwoCOB5Hr1eD91uF/1+H5IkQaDvB8IAgihAHErg6Z5nXoQ0HNKZAGk0ZPPRzVemA5rDybKMIAjgeR4Mw4Drugi2W8RhBNBnT/yXQ59oSPFD+MTFZrMB12w2oes6FEXBeDzGVFVxP19ANhb4/PATnxZDNOYSGjNxz4UqpMwEfLy7xvntFRpyH0/mE7hOpwPf96FpGizTgm3bIDbBg6nj5l7Gt+UEI6rftTv80H8xFE/DxE1RPB0Tytw3QRwC7rJziWStVitWO6nsUvUdBxuyAra0VxClFXcrwn+XQ+9w7XYbcRyDEMJCd6zXPvsnURiyeRRFKdTb9KJH5zH1IfVRmCoLbLVaLP0w0Hc93NpLNH+PcK5e4/30CmfT3p4Psy84UxPonuo7Om8sJFjE/jcwqZsEJpUt08DycQnDsaBZBh6JyTCIBS8MsD5g55Mv/AOeDWy6icyvzgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"new jobs\"\n        title=\"\"\n        src=\"/static/a4b9952e009f5bd348ab97170be7b952/e4fa8/new-jobs.png\"\n        srcset=\"/static/a4b9952e009f5bd348ab97170be7b952/01387/new-jobs.png 320w,\n/static/a4b9952e009f5bd348ab97170be7b952/e49a9/new-jobs.png 640w,\n/static/a4b9952e009f5bd348ab97170be7b952/e4fa8/new-jobs.png 1021w\"\n        sizes=\"(max-width: 1021px) 100vw, 1021px\"\n      />\n  </span></p>\n<h1 id=\"デプロイまでの詳細設定\"><a href=\"#%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%BE%E3%81%A7%E3%81%AE%E8%A9%B3%E7%B4%B0%E8%A8%AD%E5%AE%9A\" aria-label=\"デプロイまでの詳細設定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デプロイまでの詳細設定</h1>\n<h2 id=\"circleci\"><a href=\"#circleci\" aria-label=\"circleci permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCI</h2>\n<h3 id=\"ssh-key\"><a href=\"#ssh-key\" aria-label=\"ssh key permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH Key</h3>\n<p>CircleCIがデプロイに使用するためのSSH鍵を新規に生成します；</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-keygen -t rsa -b 4096 -C <span class=\"token string\">\"circleci@suzukalight.com\"</span> -f ~/.ssh/circleci-suzukalight\n$ pbcopy <span class=\"token operator\">&lt;</span> ~/.ssh/circleci-suzukalight</code></pre></div>\n<p><strong>Settings -> SSH Permisions -> Add SSH Key</strong> に秘密鍵をCircleCIに登録し、そのfingerprintを保存しておきます；</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Hostname    : github.com  \nPrivate Key : [Paste Clipboard]</code></pre></div>\n<h3 id=\"environment-variables\"><a href=\"#environment-variables\" aria-label=\"environment variables permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Environment Variables</h3>\n<p><strong>Settings -> Environment Variables</strong> に Contentful の AccessToken と SpaceID を登録しておき、CircleCI からデプロイができるようにします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CONTENTFUL_ACCESS_TOKEN : xxx\nCONTENTFUL_SPACE_ID     : xxx\nHOST_NAME               : github.com\nUSER_NAME               : circleci</code></pre></div>\n<h2 id=\"github\"><a href=\"#github\" aria-label=\"github permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub</h2>\n<h3 id=\"deploy-key\"><a href=\"#deploy-key\" aria-label=\"deploy key permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy Key</h3>\n<p><strong>Settings -> Deploy keys -> Add Deploy Key</strong> に、先程の秘密鍵に対する公開鍵を GitHub 側に登録します；</p>\n<div class=\"gatsby-code-title\">bash</div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pbcopy <span class=\"token operator\">&lt;</span> ~/.ssh/circleci-suzukalight.pub</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Title : CircleCI-Contentful\nKey   : [Paste Clipboard]\n[x]   : Allow write access</code></pre></div>\n<h2 id=\"gatsby-contentful-starter\"><a href=\"#gatsby-contentful-starter\" aria-label=\"gatsby contentful starter permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-contentful-starter</h2>\n<p>CircleCI で実行するデプロイコマンドを追加します。CircleCI に秘密鍵を登録したときに表示された fingerprint を用意しておきましょう；</p>\n<h3 id=\"configyml\"><a href=\"#configyml\" aria-label=\"configyml permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>config.yml</h3>\n<div class=\"gatsby-code-title\">.circleci/config.yml</div>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">      <span class=\"token comment\"># run deploy</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">add_ssh_keys</span><span class=\"token punctuation\">:</span>  \n          <span class=\"token key atrule\">fingerprints</span><span class=\"token punctuation\">:</span>  \n            <span class=\"token punctuation\">-</span> <span class=\"token string\">\"aa:aa:aa:aa...\"</span>  \n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>  \n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Start ssh<span class=\"token punctuation\">-</span>keyscan  \n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">  \n            ssh-keyscan ${HOST_NAME} >> ~/.ssh/known_hosts</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy development branch to gh<span class=\"token punctuation\">-</span>pages\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            git config user.email \"circleci@suzukalight.com\"\n            git config user.name \"circleci\"\n            yarn deploy</span></code></pre></div>\n<h3 id=\"staticcname\"><a href=\"#staticcname\" aria-label=\"staticcname permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>static/CNAME</h3>\n<p>独自ドメインを登録している人は、CNAMEファイルを忘れずに追加しましょう。私はこれを忘れていて、デプロイのたびにリセットされてしまいました。</p>\n<div class=\"gatsby-code-title\">static/CNAME</div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">study-gatsby-contentful.suzukalight.com</code></pre></div>\n<h1 id=\"記事を更新してみよう\"><a href=\"#%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\" aria-label=\"記事を更新してみよう permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事を更新してみよう</h1>\n<p>これでセットアップは完了です。では早速、Contentful で記事を更新してみます。</p>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1006px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.240556660039765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB8UlEQVQoz4WRT08TURTF52O4MO1CVKhGEUkFE+M/UKIbty7c+SX8Bm78AsaNWItgnYKhijYxMcaVCxM0EjZKldJCO9P5P/Om0/6808aIicabnJyZl3vvOe88LTs2RfbYGTK5PAdGTnEwN83xs9c5PDnDoYlL5KbnGBHOjM+SHb/M0fwMR/JXOTF3m9Gpa4zmZ8mcvMDYxHlOT55De6DrPFzSefREeKHE/GKZBX2VxZWX6JUqK2tvKL+osvzqHctrb3m2+pr5p88pLElfucJjvUJRcL9Q4s69AppPj0Ap/CAkEg6iCM8P6PZ6/Kq+QHW7JP0+6akbRvhxl1DOfBUTdRMsme8EMZppeQTS4HgBRsfGcjwM28GTBsfz2ao3qe00+bbdoNk2Rcwn8EKSSARUMkAvSugLq0ih7bZMtmrfqTeaxKIUi2qKRBymUOIkFnSThFDcRyK+sbfDh90an9p11lvbfGz9YN1q0Ao9NFecOY5DJNv/Vx3bphco7tbec+VLkVuby9zcLHNjo8TFz0Wqxle0juXgui6hKPclo38hLcMwcD1vEI/l+lgSiS3fHSekbQW4QSQLbRdfclES7nDu94LB3/6Fpjlc6KfDoUSQPqIacKiGrDkScBzH+4b/vObfHNrizHBc9kxrgLbcMn3IVOQnxbJ1sCTbmmUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"update content\"\n        title=\"\"\n        src=\"/static/e519b708d1f5f5ea80df435a8ab87157/f4992/update-content.png\"\n        srcset=\"/static/e519b708d1f5f5ea80df435a8ab87157/01387/update-content.png 320w,\n/static/e519b708d1f5f5ea80df435a8ab87157/e49a9/update-content.png 640w,\n/static/e519b708d1f5f5ea80df435a8ab87157/f4992/update-content.png 1006w\"\n        sizes=\"(max-width: 1006px) 100vw, 1006px\"\n      />\n  </span></p>\n<p>CircleCI 側の job を見ると、即座に実行が開始されており、30秒ほどでデプロイ完了のSUCCESS表示に切り替わります。</p>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1015px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.83251231527094%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVQoz22RS2/aUBBG/U+ACCGEKN2ETRZtpbLrX013PDaIgjGpkCpVavpgU7nCIYJgYWL8tuF07qWR+rry8fdde2Y8nmtctS+5bLdptZ5RLpepVCpcVC60lkolrZ1Oh2q1qvcqptV6Tq1Wo16v02g0aDabvOy85s2rFxjWdMp4PGY0GtHr9RgOh1iWhWmaTH5h3dxoHU/OqL0peVOJs2Yz8Rbv53PMyQTDtn+QZRlxnODtPIIg4Hg8chLkduZYnJWTXMLf74oc0oTocMC4vn6L67osl0sWiwW2bXPnOKy2Lrc7n/mDh7XxmG2U7rRXOl2LF8x7l3fOmv53hw/OPUa/3yeKIlarFdvtFs/z2AsP0u3HtcvnfcinfaC5Vd4TfYz4ckiEmK+i3wLxQcpdlGIMBgPUUr+qCodhSCgahwH+Zk34uCcTn0chRRyRSZzMiP+uosBQB3GSufi+r4s+EUlhNZM0y//Jy/OcKEnURDlKrkL5XBXsdrs6SBXU3QlP3aZpqlGH9jtxHOP5hz+eqY+o2J/l6ChJmsLjMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"triggered ci\"\n        title=\"\"\n        src=\"/static/eae60373ccd621d2dd882b6cba325d7e/25f31/triggered-ci.png\"\n        srcset=\"/static/eae60373ccd621d2dd882b6cba325d7e/01387/triggered-ci.png 320w,\n/static/eae60373ccd621d2dd882b6cba325d7e/e49a9/triggered-ci.png 640w,\n/static/eae60373ccd621d2dd882b6cba325d7e/25f31/triggered-ci.png 1015w\"\n        sizes=\"(max-width: 1015px) 100vw, 1015px\"\n      />\n  </span></p>\n<p>記事側を見にいくと、更新されていることが確認できます。これで完了です！</p>\n<p><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 812px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.07389162561577%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKUlEQVQoz6WQvUoDURSE74OIbxCCKII2AQmIAWsFGx9AsPEF8gxaiwoKClpYaWGjiAgpLQU7E7P5MZt79/7sz+fdwIKFxqgDwxzOcA7DiPN6ibP6DDe7SzT2SzxfrvNwvML9UY27wyqPJ1Wu9zZ4udqicbHD9uYaq7VlKotlKgtlpqanmZ0rc3tQ4el0HpE6Rc7Yek0isjjysyRLDGmsSbxnzMDvLaQWE0nCcID2Gqmhn0OUkjgb4kyIGA4V7aBLp/dO0OnT9drrDwi6fdrtDoH3pDLkyPgZIo5jjNYYa9BerVdjCurRzjlHlmVkaUo6hrkvkiSh4DiMHk5AYZ0lZ5Hiu+NJIaSUvDZbNFtvvlz1qzRfJ7TWl67QvjPn+ywe/hWiKP1zV//BB8lApqJeN/f9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"updated content\"\n        title=\"\"\n        src=\"/static/893694f9f308aba6f4992f23476800e0/08784/updated-content.png\"\n        srcset=\"/static/893694f9f308aba6f4992f23476800e0/01387/updated-content.png 320w,\n/static/893694f9f308aba6f4992f23476800e0/e49a9/updated-content.png 640w,\n/static/893694f9f308aba6f4992f23476800e0/08784/updated-content.png 812w\"\n        sizes=\"(max-width: 812px) 100vw, 812px\"\n      />\n  </span></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#circleci-%E3%81%AE%E8%A8%AD%E7%BD%AE%E3%81%A8%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\">CircleCI の設置と動作確認</a></p>\n<ul>\n<li><a href=\"/2019-07-14-deploy-circleci/#%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97\">サインアップ</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#%E3%83%96%E3%83%AD%E3%82%B0%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%ABci%E8%A8%AD%E5%AE%9A\">ブログリポジトリにCI設定</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%9B%B4%E6%96%B0\">リポジトリのファイルを更新</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#ci%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\">CIの動作確認</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#personal-api-token-%E3%82%92%E5%85%A5%E6%89%8B\">Personal API Token を入手</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#contentful-%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A\">Contentful の初期設定</a></p>\n<ul>\n<li><a href=\"/2019-07-14-deploy-circleci/#contentful-%E3%81%AB-webhook-%E3%82%92%E8%BF%BD%E5%8A%A0\">Contentful に webhook を追加</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%80%81ci%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E3%81%8B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF\">コンテンツを変更し、CIが起動するかチェック</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%BE%E3%81%A7%E3%81%AE%E8%A9%B3%E7%B4%B0%E8%A8%AD%E5%AE%9A\">デプロイまでの詳細設定</a></p>\n<ul>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#circleci\">CircleCI</a></p>\n<ul>\n<li><a href=\"/2019-07-14-deploy-circleci/#ssh-key\">SSH Key</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#environment-variables\">Environment Variables</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#github\">GitHub</a></p>\n<ul>\n<li><a href=\"/2019-07-14-deploy-circleci/#deploy-key\">Deploy Key</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-14-deploy-circleci/#gatsby-contentful-starter\">gatsby-contentful-starter</a></p>\n<ul>\n<li><a href=\"/2019-07-14-deploy-circleci/#configyml\">config.yml</a></li>\n<li><a href=\"/2019-07-14-deploy-circleci/#staticcname\">static/CNAME</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/2019-07-14-deploy-circleci/#%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\">記事を更新してみよう</a></li>\n</ul>","frontmatter":{"title":"CircleCI で Contentful の更新をデプロイ","date":"2019-07-14T00:08:00","description":null,"category":"Technology","tags":["gatsby","circleci","contentful","github pages"],"hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVQoz5WRvU4CQRSF5wkIBT+10tCpLQkPYEcoBAMCLY0aG0sfAdwFNggU0tgYH8KEQGJi7JEYE4EAuy7ssj+wkOPMKEZj407y5dw5N/fO7r3kJJvGfjSCrVAIe7s7CAT88Pl88Pv9CAaD9B74vjO8Xi/C4TAikQg8Hg/3WH4DScRiOM7nIV1VIVUlCGURl6IAQRBQLpc5LBZFEaVSice1Wg31ep17LM98kcKUHGWyaDQa4MdwPnUFqKoK27axWNg0nkLTNMznc+i6zv1NnsF9ClPS6z6j9/qCi841zls1nN1LKDzeYkYbsKJNoWVZv+Ceaf3xSafVRvvpAds3OQSaCfiaB4jencJQZDiOg+VyCTeHZLM5VCoVKOYMg+kEMtWZpWNNG63Xa85qtfo3JENnKEkS5pqO8XAEeTTGoD+ArCgwDIPPxQ0klUqjQjdl0uL3r5kx/bkEVw2TyUO+fmNh8WLTNPmXsa0xdQuJx+MoFIvozvp4U0bQbAOyrmKoTviLbn/7A0gUnqEJDbHcAAAAAElFTkSuQmCC","aspectRatio":2,"src":"/static/48f00146e96575abae77826967064fd6/ed42f/complete-ci.png","srcSet":"/static/48f00146e96575abae77826967064fd6/7b192/complete-ci.png 320w,\n/static/48f00146e96575abae77826967064fd6/abde0/complete-ci.png 640w,\n/static/48f00146e96575abae77826967064fd6/ed42f/complete-ci.png 843w","sizes":"(max-width: 843px) 100vw, 843px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"source":"github","slug":"/2019-07-14-deploy-circleci/","previous":{"head":{"title":"Gatsby + Contentful + GitHub Pages ハンズオン","category":"Technology","tags":["hands-on","gatsby","contentful","github pages"],"date":"2019-07-13T00:08:00","slug":"/2019-07-13-contentful-starter/","source":"github"},"siteMetadata":{"title":"suzukalight.com"}},"next":{"head":{"title":"函館旅行記（2019/7/17～4泊）","category":"Trip","tags":["函館","競馬","twitter"],"date":"2019-07-21T00:08:00","slug":"/2019-07-21-trip-hakodate/","source":"github"},"siteMetadata":{"title":"suzukalight.com"}}}}}