{"componentChunkName":"component---src-components-templates-blog-post-index-js","path":"/2019-07-06-tags/","webpackCompilationHash":"854bff00c7f5b8106858","result":{"data":{"site":{"siteMetadata":{"title":"suzukalight.com","author":"suzukalight"}},"markdownRemark":{"id":"148c13a0-7fa3-5601-9b23-bb6bd6417574","excerpt":"この記事のタイトル部分に表示されているような「タグ機能」を実装する方法について解説します。記事にタグカラムを追加タグを指定するカラムを、md…","html":"<p>この記事のタイトル部分に表示されているような「タグ機能」を実装する方法について解説します。</p>\n<h1 id=\"記事にタグカラムを追加\"><a href=\"#%E8%A8%98%E4%BA%8B%E3%81%AB%E3%82%BF%E3%82%B0%E3%82%AB%E3%83%A9%E3%83%A0%E3%82%92%E8%BF%BD%E5%8A%A0\" aria-label=\"記事にタグカラムを追加 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事にタグカラムを追加</h1>\n<p>タグを指定するカラムを、mdファイルの先頭に追加します。前回トップ画像情報を追加したときと同じ手法です。</p>\n<div class=\"gatsby-code-title\">index.md</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">...</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tag'</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">---</span></code></pre></div>\n<p>タグは複数つけられるため、配列で指定できるようにしています。タグの名称は予め登録しておく必要はなく、そのときに自由に記述してOKです。</p>\n<h1 id=\"記事詳細にタグを表示\"><a href=\"#%E8%A8%98%E4%BA%8B%E8%A9%B3%E7%B4%B0%E3%81%AB%E3%82%BF%E3%82%B0%E3%82%92%E8%A1%A8%E7%A4%BA\" aria-label=\"記事詳細にタグを表示 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事詳細にタグを表示</h1>\n<h2 id=\"query\"><a href=\"#query\" aria-label=\"query permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>query</h2>\n<p>markdownからタグを抽出します；</p>\n<div class=\"gatsby-code-title\">BlogPost/index.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql`\n  query <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    frontmatter <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">date</span><span class=\"token punctuation\">(</span>formatString<span class=\"token punctuation\">:</span> <span class=\"token string\">\"MMMM DD, YYYY\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">...</span>\n<span class=\"gatsby-highlight-code-line\">      tags</span></code></pre></div>\n<h2 id=\"component\"><a href=\"#component\" aria-label=\"component permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>component</h2>\n<p>このタグ情報を表示するコンポーネントを作成します；</p>\n<div class=\"gatsby-code-title\">Tags/index.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> kebabCase <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash/kebabCase'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./index.module.scss'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Tag</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> tag <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Link className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>link<span class=\"token punctuation\">}</span> to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`/tags/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>li className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>tag<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Tags</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> tags <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>ul className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>tags <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Tag key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span> tag<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Tags<span class=\"token punctuation\">;</span></code></pre></div>\n<p>記事詳細テンプレートで、このTagコンポーネントをimportし利用すると、下記のように表示されて、タグ表示は完了です。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1df2308f4c16037440ec4ef4368bc3dd/f4334/blogpost.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 461px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.32104121475054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/ElEQVQY03VQu1LDMBDU/38DmB5QG+IqaRgnpkjMTKiAgiKNLfT0Q8j2olMRUuCb2dHtPffE3k4nbLcbPBc7bOK7Kwp8frzjcKxQ7vcoyxe8VhXy9RpZdoub7A5PqxXyPAd/5OCc4/6Bo+97kLFpHOG9xzRN8IOHtRaubdFGDEOfOPlUM89zagohoOu6BKUUtNZwzkFJCUbEGJOaCMTrur5w8S3QNE2qoQGUl1LFZQPayClu4lLKOWfBSEFSFTeMUS0VaK0uCkgZDfmJqmgI+YQlY0pJCCFikUmnfJ0FhHLQxqGWdrGRzv8PLDnTXyCEMSmlP6V3qfF66LX9AqoryB64b3fEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"タグ表示\"\n        title=\"\"\n        src=\"/static/1df2308f4c16037440ec4ef4368bc3dd/f4334/blogpost.png\"\n        srcset=\"/static/1df2308f4c16037440ec4ef4368bc3dd/cf440/blogpost.png 148w,\n/static/1df2308f4c16037440ec4ef4368bc3dd/d2d38/blogpost.png 295w,\n/static/1df2308f4c16037440ec4ef4368bc3dd/f4334/blogpost.png 461w\"\n        sizes=\"(max-width: 461px) 100vw, 461px\"\n      />\n  </span>\n  </a></p>\n<h1 id=\"タグ一覧ページを追加\"><a href=\"#%E3%82%BF%E3%82%B0%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E8%BF%BD%E5%8A%A0\" aria-label=\"タグ一覧ページを追加 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タグ一覧ページを追加</h1>\n<p>タグをクリックすると、そのタグが紐付けられている記事一覧を表示するようなページを作成します。</p>\n<ol>\n<li><code class=\"language-text\">gatsby-node.js</code>: 全mdファイルからタグを抽出して分類し、各タグごとの記事一覧ページであるHTMLを <code class=\"language-text\">/tags/{tagName}</code> のURLで出力する処理を書く</li>\n<li><code class=\"language-text\">templates/Tags/index.js</code>: <code class=\"language-text\">/tags/{tagName}</code> ページのテンプレートを作成する</li>\n</ol>\n<h2 id=\"gatsby-nodejs\"><a href=\"#gatsby-nodejs\" aria-label=\"gatsby nodejs permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-node.js</h2>\n<p>記事情報を取得するqueryのfrontmatterにtagsを追加し、mdファイルからタグ情報を取得しておきます；</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`\n{\n  allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }, limit: 1000) {\n    edges {\n      node {\n        frontmatter {\n          ...\n<span class=\"gatsby-highlight-code-line\">          tags</span>        }\n`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>記事情報を取得できたら、そこからタグ情報を抽出し、重複を取り除きます。得られたタグ配列を使用して、createPageでタグ毎のページを出力させます；</p>\n<div class=\"gatsby-code-title\">gatsby-node.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tags <span class=\"token operator\">=</span> posts<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tags<span class=\"token punctuation\">,</span> edge</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> edgeTags <span class=\"token operator\">=</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">,</span> <span class=\"token string\">'node.frontmatter.tags'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> edgeTags <span class=\"token operator\">?</span> tags<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> tags<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> tagTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`./src/components/templates/Tags/index.js`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>new <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span>tags<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/tags/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span><span class=\"token punctuation\">,</span>\n      component<span class=\"token punctuation\">:</span> tagTemplate<span class=\"token punctuation\">,</span>\n      context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        tag<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"templatestagsindexjs\"><a href=\"#templatestagsindexjs\" aria-label=\"templatestagsindexjs permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>templates/Tags/index.js</h2>\n<p>createPageで生成するタグページのテンプレートです。</p>\n<h3 id=\"query-1\"><a href=\"#query-1\" aria-label=\"query 1 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>query</h3>\n<p><code class=\"language-text\">gatsby-node.js</code>から受け取った<code class=\"language-text\">context.tag</code>をqueryのfilter条件に利用することで、そのタグが紐ついているmdファイルのみを抽出することができるようになります；</p>\n<div class=\"gatsby-code-title\">templates/Tags/index.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n<span class=\"gatsby-highlight-code-line\">  query($tag: String) {</span>    site {\n      ...\n    }\n    allMarkdownRemark(\n      limit: 2000\n      sort: { fields: [frontmatter___date], order: DESC }\n<span class=\"gatsby-highlight-code-line\">      filter: { frontmatter: { tags: { in: [$tag] } } }</span>    ) {\n      ...\n    }\n  }\n`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"component-1\"><a href=\"#component-1\" aria-label=\"component 1 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>component</h3>\n<p>queryで取得した記事情報をもとに、記事一覧を表示します；</p>\n<div class=\"gatsby-code-title\">templates/Tags/index.js</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Tags</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> location<span class=\"token punctuation\">,</span> pageContext<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> tag <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> edges<span class=\"token punctuation\">,</span> totalCount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> tagHeader <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>totalCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> post</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>totalCount <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'s'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> tagged with \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tag<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> siteTitle <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>siteTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Seo title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tagHeader<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>tagHeader<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">{</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> fields<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> slug <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> frontmatter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>slug<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token string\">\"/tags\"</span><span class=\"token operator\">></span>All tags<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>このようなページが作成できました；</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9d5a16e8db5305de375ab45d7a4dbc8/4f3bc/tagged-articles.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.58139534883721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABK0lEQVQoz42SiW6DQAxE+f//SwiNIC2gcpUrLOceU3tp1SLRgiWzp4fn0TpZmuLxeEXg+3gLQ/hBAM+7wXVdhLT2bi58P0CWZbR3xeVyRRRGUEqDwxizSUcIYS/neYayLJEkCe73F8RxjKqqaD9H07So6Ix/kLwn9t6emBWkL2Zp0I0Ki1rHspM25QqxG1y8F46SEl0/oX5OaMWMpOzx7Gc03YS4EMjrAcMsWQJa6x+avwiN0RgnacX6cSGxBYLGhte0z/NFbv36LxylFMQwoyJCJhtI5KMdkVbDpvh7fiTqaK1WQhJjGhYcF2XpmHb5ZeQR3SpIhOxh0Yy2ZfayJMKaPOwGar2bEeUCRTudJdT2TXFqbewov9Ku6ZwppTrno8O+MR0XH8WZlj8Bm/sNV80A6M8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"タグ表示\"\n        title=\"\"\n        src=\"/static/a9d5a16e8db5305de375ab45d7a4dbc8/b9e4f/tagged-articles.png\"\n        srcset=\"/static/a9d5a16e8db5305de375ab45d7a4dbc8/cf440/tagged-articles.png 148w,\n/static/a9d5a16e8db5305de375ab45d7a4dbc8/d2d38/tagged-articles.png 295w,\n/static/a9d5a16e8db5305de375ab45d7a4dbc8/b9e4f/tagged-articles.png 590w,\n/static/a9d5a16e8db5305de375ab45d7a4dbc8/4f3bc/tagged-articles.png 688w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h1 id=\"タグ一覧ページ\"><a href=\"#%E3%82%BF%E3%82%B0%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8\" aria-label=\"タグ一覧ページ permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>タグ一覧ページ</h1>\n<p>すべてのタグを表示できるページも用意しましょう。<code class=\"language-text\">/tags</code>で表示できるようにします。</p>\n<h2 id=\"query-2\"><a href=\"#query-2\" aria-label=\"query 2 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>query</h2>\n<p><code class=\"language-text\">group</code>を利用することで、tagでgroupbyをかけた結果を得ることができます。totalCountを受け取って、記事の総数も表示できるようにしましょう；\n<a href=\"https://www.gatsbyjs.org/docs/graphql-reference/#group\" target=\"_blank\" rel=\"noopener\">https://www.gatsbyjs.org/docs/graphql-reference/#group</a></p>\n<div class=\"gatsby-code-title\">pages/tags.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(limit: 2000) {\n      group(field: frontmatter___tags) {\n        fieldValue\n        totalCount\n      }\n    }\n  }\n`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"component-2\"><a href=\"#component-2\" aria-label=\"component 2 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>component</h2>\n<p>groupbyした結果をもとに、タグ一覧を表示します；</p>\n<div class=\"gatsby-code-title\">pages/tags.js</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TagsPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  location<span class=\"token punctuation\">,</span>\n  data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    allMarkdownRemark<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> group <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    site<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Seo title<span class=\"token operator\">=</span><span class=\"token string\">\"Tags\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Tags<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>group<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`/tags/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">.</span>fieldValue<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">.</span>totalCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>このようなページが作成できました；</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2c18dfbc5a376959f1f31e37414a121/672f7/tags-page.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.67816091954023%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiklEQVQoz6WQsQ7DIAxE/f8/l66NmrXZqjbBQDBwxWSIshqkw0JIT89H83PGe11RK1raNXjoMU1Ylld/KHA0pKAogAsJImUYTDsHfLaIrzsg+QKaV2YfO3Dj1KcmZ7spcTjtnE/48QFuq5dSzabdUIG7Atv0rdBhoJrFlG8f1h7Jh7M/DnLrwgr9AyRmyA3oRz0KAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"タグ表示\"\n        title=\"\"\n        src=\"/static/b2c18dfbc5a376959f1f31e37414a121/b9e4f/tags-page.png\"\n        srcset=\"/static/b2c18dfbc5a376959f1f31e37414a121/cf440/tags-page.png 148w,\n/static/b2c18dfbc5a376959f1f31e37414a121/d2d38/tags-page.png 295w,\n/static/b2c18dfbc5a376959f1f31e37414a121/b9e4f/tags-page.png 590w,\n/static/b2c18dfbc5a376959f1f31e37414a121/672f7/tags-page.png 609w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h1 id=\"記事一覧に表示\"><a href=\"#%E8%A8%98%E4%BA%8B%E4%B8%80%E8%A6%A7%E3%81%AB%E8%A1%A8%E7%A4%BA\" aria-label=\"記事一覧に表示 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>記事一覧に表示</h1>\n<p><code class=\"language-text\">pages/index.js</code>のqueryにtagsを加えれば、記事一覧にもタグを表示できます。手法は同じのため、詳細は割愛します。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f3ad58d277458704d4b1f7ec4b445d25/0336a/index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.368045649072755%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKklEQVQoz41SXY+CMBDs//9DvqiJ93A+n5EXFcQzKohSoBVaPpzb7QXjabw4yWQ2YTvbnSKiwwGe5yEMQ0ynn/iYTKjewPd9DAYDjIZDjMZjJKcTGF3X4Xq9/iGjV6G1QpIkiOMYaZo6xnHkNM8LYkbMIaVEURRQSkFrjbIsUTfNzexmeLlcXJNSGmdJhwuFU/qr93i81SuKfgVGZVua2qEkJXma/g4ErxRFEY608mG/RyZThOs1ZrMv2Lp+ecs+T00bGmNgrUVN/eJMYS+XK6yIezJk0yBYYz73XG6clzEWDeXlfB4eYkv9O3pY7uX4RFVVruBDZ6luQTNqmlpVxpm1bfscAWkUH7EIAmx3O8q9gOBGZkcfjW3+ze3+Zn3Nf8PCDxBsviGzDD/tyGm5jxKp4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"タグ表示\"\n        title=\"\"\n        src=\"/static/f3ad58d277458704d4b1f7ec4b445d25/b9e4f/index.png\"\n        srcset=\"/static/f3ad58d277458704d4b1f7ec4b445d25/cf440/index.png 148w,\n/static/f3ad58d277458704d4b1f7ec4b445d25/d2d38/index.png 295w,\n/static/f3ad58d277458704d4b1f7ec4b445d25/b9e4f/index.png 590w,\n/static/f3ad58d277458704d4b1f7ec4b445d25/0336a/index.png 701w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h1 id=\"references\"><a href=\"#references\" aria-label=\"references permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>references</h1>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/adding-tags-and-categories-to-blog-posts/\" target=\"_blank\" rel=\"noopener\">Creating Tags Pages for Blog Posts | GatsbyJS</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/2019-07-06-tags/#%E8%A8%98%E4%BA%8B%E3%81%AB%E3%82%BF%E3%82%B0%E3%82%AB%E3%83%A9%E3%83%A0%E3%82%92%E8%BF%BD%E5%8A%A0\">記事にタグカラムを追加</a></li>\n<li>\n<p><a href=\"/2019-07-06-tags/#%E8%A8%98%E4%BA%8B%E8%A9%B3%E7%B4%B0%E3%81%AB%E3%82%BF%E3%82%B0%E3%82%92%E8%A1%A8%E7%A4%BA\">記事詳細にタグを表示</a></p>\n<ul>\n<li><a href=\"/2019-07-06-tags/#query\">query</a></li>\n<li><a href=\"/2019-07-06-tags/#component\">component</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-06-tags/#%E3%82%BF%E3%82%B0%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E8%BF%BD%E5%8A%A0\">タグ一覧ページを追加</a></p>\n<ul>\n<li><a href=\"/2019-07-06-tags/#gatsby-nodejs\">gatsby-node.js</a></li>\n<li>\n<p><a href=\"/2019-07-06-tags/#templatestagsindexjs\">templates/Tags/index.js</a></p>\n<ul>\n<li><a href=\"/2019-07-06-tags/#query-1\">query</a></li>\n<li><a href=\"/2019-07-06-tags/#component-1\">component</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-07-06-tags/#%E3%82%BF%E3%82%B0%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8\">タグ一覧ページ</a></p>\n<ul>\n<li><a href=\"/2019-07-06-tags/#query-2\">query</a></li>\n<li><a href=\"/2019-07-06-tags/#component-2\">component</a></li>\n</ul>\n</li>\n<li><a href=\"/2019-07-06-tags/#%E8%A8%98%E4%BA%8B%E4%B8%80%E8%A6%A7%E3%81%AB%E8%A1%A8%E7%A4%BA\">記事一覧に表示</a></li>\n<li><a href=\"/2019-07-06-tags/#references\">references</a></li>\n</ul>","frontmatter":{"title":"Gatsby にタグ機能を追加","date":"2019/7/6","description":"mdファイルの先頭にタグ情報を付与・そのタグを記事詳細に表示・タグ別の記事一覧ページを作成・タグ一覧ページを作成","tags":["gatsby","tag"],"hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+0lEQVQoz61PXUvEMBDMP/Ne7YEgfhwI4osi6j+2rcV6xcOzTUqTJpWm4+5ylb4IPrgwZHeyM7uruq6D9x5t2+J9t0PTaDBXNzWqqhLe9T2MMQLnHKy1whujSRugdUO6BtZZqBgjQghiyu8s4PevMU2TgEPNJsMwiKnWGnVdC8e17z14KOdz3ziOtLVDT5sz+H82Vp8k1tpQ4xcJLIqiQFm+YaBBr2WJPMvlrC3laZbhY79HZztkeUa9L3hOU7mMI0YyxD+H4uk+LOAPWHAhDD8851IvemeOoVbJJY6Oz3/FKrnAenOH0+tHnFzdI9ncCjg/u3ki/kHq9QHfloD5TG8JAvUAAAAASUVORK5CYII=","aspectRatio":2.0416666666666665,"src":"/static/79dc656fc2f32d0756e126ce1ce2a469/385bc/hero.png","srcSet":"/static/79dc656fc2f32d0756e126ce1ce2a469/d0480/hero.png 245w,\n/static/79dc656fc2f32d0756e126ce1ce2a469/385bc/hero.png 430w","sizes":"(max-width: 430px) 100vw, 430px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2019-07-06-tags/","previous":{"fields":{"slug":"/2019-07-02-hero-image/"},"frontmatter":{"title":"Gatsby で記事のトップ画像を設定","tags":["gatsby","gatsby-image"]}},"next":{"fields":{"slug":"/2019-07-10-links/"},"frontmatter":{"title":"Gatsby でリンクを扱う／展開する","tags":["gatsby","social","twitter","iframely","anchor"]}}}}}