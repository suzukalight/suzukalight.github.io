{"componentChunkName":"component---src-components-templates-blog-post-source-github-js","path":"/2019-09-09-react-i18next/","webpackCompilationHash":"dad78a60c3279625c28d","result":{"data":{"site":{"siteMetadata":{"title":"suzukalight.com","author":"suzukalight"}},"markdownRemark":{"id":"5f65e5b1-a4b0-5c7f-b6a3-e2a26f6a234d","excerpt":"最近ははじめから世界で勝負しようと頑張っているアプリも増えてきています。その場合に、障壁のひとつとなるが多言語対応（国際化・i18n）の方法だと思います。今回はこの i18n について素振りしてみました。 まえがき 完成品 実装したリポジトリはこちらです； https://github.com/suzukalight…","html":"<p>最近ははじめから世界で勝負しようと頑張っているアプリも増えてきています。その場合に、障壁のひとつとなるが多言語対応（国際化・i18n）の方法だと思います。今回はこの i18n について素振りしてみました。</p>\n<h1 id=\"まえがき\"><a href=\"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\" aria-label=\"まえがき permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まえがき</h1>\n<h2 id=\"完成品\"><a href=\"#%E5%AE%8C%E6%88%90%E5%93%81\" aria-label=\"完成品 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完成品</h2>\n<p>実装したリポジトリはこちらです；</p>\n<p><a href=\"https://github.com/suzukalight/study-react-i18next\" target=\"_blank\" rel=\"noopener\">https://github.com/suzukalight/study-react-i18next</a></p>\n<h2 id=\"動作環境\"><a href=\"#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83\" aria-label=\"動作環境 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>動作環境</h2>\n<ul>\n<li>Mac</li>\n<li>Node.js v10.16.0 / npm v6.9.0 / yarn v1.16.0</li>\n<li>create-react-app (react-script v3.1.1)</li>\n<li>TypeScript v3.5.3</li>\n<li>react-i18next v10.12.2</li>\n<li>i18next v17.0.13</li>\n</ul>\n<h1 id=\"多言語対応\"><a href=\"#%E5%A4%9A%E8%A8%80%E8%AA%9E%E5%AF%BE%E5%BF%9C\" aria-label=\"多言語対応 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>多言語対応</h1>\n<h2 id=\"ライブラリ比較\"><a href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E6%AF%94%E8%BC%83\" aria-label=\"ライブラリ比較 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ライブラリ比較</h2>\n<p>多言語対応のために利用可能なライブラリとして、下記のものがあります；</p>\n<ul>\n<li><a href=\"https://github.com/formatjs/react-intl\" target=\"_blank\" rel=\"noopener\">react-intl</a></li>\n<li><a href=\"https://github.com/i18next/react-i18next\" target=\"_blank\" rel=\"noopener\">react-i18next</a></li>\n<li><a href=\"https://github.com/airbnb/polyglot.js\" target=\"_blank\" rel=\"noopener\">polyglot</a></li>\n</ul>\n<p>react-intl がもっともスターが多く、利用例も豊富にあったのですが、私はどうもあの JSX を多用する言語変換系が好きになれず、、、react-i18next は「t 関数」でサクッと変換するだけのシンプルさがあり、こちらに興味を持ちました。</p>\n<h2 id=\"セットアップ\"><a href=\"#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97\" aria-label=\"セットアップ permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>セットアップ</h2>\n<p>素振り用に create-react-app —typescript します；</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ npx create-react-app study-react-i18next --typescript\n$ <span class=\"token builtin class-name\">cd</span> study-react-i18next\n$ <span class=\"token function\">yarn</span></code></pre></div>\n<p>react-i18next と、前提パッケージとなる i18next をインストールします；</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> i18next react-i18next</code></pre></div>\n<h1 id=\"使い方\"><a href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"使い方 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使い方</h1>\n<h2 id=\"翻訳対象の指定\"><a href=\"#%E7%BF%BB%E8%A8%B3%E5%AF%BE%E8%B1%A1%E3%81%AE%E6%8C%87%E5%AE%9A\" aria-label=\"翻訳対象の指定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>翻訳対象の指定</h2>\n<p><strong>t(‘key’)</strong> で、翻訳対象となる文字列を指定します。key といっても別に英字列である必要はないので、<strong>むしろ日本語でジャンジャン書いてしまうほうが、メイン開発者層にとって優しい開発環境になります；</strong></p>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>header className<span class=\"token operator\">=</span><span class=\"token string\">\"App-header\"</span><span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ようこそ React と react-i18next へ。'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLang</span><span class=\"token punctuation\">(</span>lang <span class=\"token operator\">===</span> <span class=\"token string\">'en'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ja'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'言語を切り替え'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>t(‘ようこそ React と react-i18next へ。‘)</strong> など、普通に日本語で開発しましょう。</p>\n<h2 id=\"辞書設定\"><a href=\"#%E8%BE%9E%E6%9B%B8%E8%A8%AD%E5%AE%9A\" aria-label=\"辞書設定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>辞書設定</h2>\n<p><code class=\"language-text\">i18next</code> パッケージを利用して初期化を行います。多くの引数が指定できますが、最初はこのあたりを指定しましょう；</p>\n<ul>\n<li><strong>resources</strong>: 辞書情報です。後述する方法で、JSON ファイルを指定したり、遅延ローディングができたりします。</li>\n<li><strong>lng</strong>: 初期表示する言語です。</li>\n<li><strong>fallbackLng</strong>: 選択した言語に関する辞書情報がない場合に、かわりに表示する言語です。</li>\n<li>interpolation: 各種の補間設定です。</li>\n</ul>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> i18n <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initReactI18next <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-i18next'</span><span class=\"token punctuation\">;</span>\n\ni18n<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>initReactI18next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  resources<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    en<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      translation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ようこそ React と react-i18next へ。'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Welcome to React and react-i18next.'</span><span class=\"token punctuation\">,</span>\n        言語を切り替え<span class=\"token punctuation\">:</span> <span class=\"token string\">'change language'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    ja<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      translation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ようこそ React と react-i18next へ。'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ようこそ React と react-i18next へ。'</span><span class=\"token punctuation\">,</span>\n        言語を切り替え<span class=\"token punctuation\">:</span> <span class=\"token string\">'言語を切り替え'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  lng<span class=\"token punctuation\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n  fallbackLng<span class=\"token punctuation\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n  interpolation<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> escapeValue<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"言語切り替え\"><a href=\"#%E8%A8%80%E8%AA%9E%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88\" aria-label=\"言語切り替え permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>言語切り替え</h2>\n<p><strong>i18n.changeLanguage(lang)</strong> を行うと、指定した言語に切り替えることができます。React なので State と Hooks によって切り替え操作を実現してみます；</p>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useTranslation <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-i18next'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> App<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">,</span> i18n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>lang<span class=\"token punctuation\">,</span> setLang<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ja'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    i18n<span class=\"token punctuation\">.</span><span class=\"token function\">changeLanguage</span><span class=\"token punctuation\">(</span>lang<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>lang<span class=\"token punctuation\">,</span> i18n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLang</span><span class=\"token punctuation\">(</span>lang <span class=\"token operator\">===</span> <span class=\"token string\">'en'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ja'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>本題とはずれますが、Hooks について補足しますと、<strong>useTranslation</strong> で t 関数と i18n インスタンスを取得し、<strong>useState</strong> で現在の言語情報と言語切替関数を取得します。<strong>useEffect</strong> で State に変更があった場合のみ、changeLanguage を実行しています（第 2 引数の<code class=\"language-text\">[lang, i18n]</code>が、これらの変数に変更があった場合のみ、useEffect がトリガされることを指示しています）</p>\n</blockquote>\n<h2 id=\"実行\"><a href=\"#%E5%AE%9F%E8%A1%8C\" aria-label=\"実行 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実行</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> start</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/290c84ffb1cb5e8f753bce5c7368043c/e49a9/ja.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABLklEQVQoz4VS207CUBDsXxgvaOiVIhQsWKHQQm+pBUSIGBITHyT4IH9hiMa/HrsLxQaDPky3e7Yzu7OnQqnSRAbtssGgd51QvUa+/l9OXIEein61E6Kolk2Iag1FxeAa5ZK2ySnSGUVR/cnpG+ILhmmjFwzgegnaTgg/GiEeTDGdPWE4fkS3H/N5EI9xN5nDC4eIkglm82ckoweEt/ew3Qi1hr2ZkATb3RCm5aLZ6m1jH14qTMRWJ8BNx4frJ9zIdiJYtseN+6m4kzYkMeLyhDSqvB05A1kQUytk50Kq4Lig4uhUxsm5xrXMMkEu1Xc8njC/1DzKhsU7Iuvv60+sP77wsnxjgf3LyOOgIEHS6mxtsVxh8brindJ0f3EOCma3TrYKRR1nKYpK9dfvtY9v7UcASfeDHV8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ja\"\n        title=\"ja\"\n        src=\"/static/290c84ffb1cb5e8f753bce5c7368043c/e49a9/ja.png\"\n        srcset=\"/static/290c84ffb1cb5e8f753bce5c7368043c/01387/ja.png 320w,\n/static/290c84ffb1cb5e8f753bce5c7368043c/e49a9/ja.png 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b703cd5a5dbe5d8ff867346521cf23f/e49a9/en.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABCklEQVQY03VQS0+DQBjkf2hMaEuBYlFaSMqrPCqURWpoUePraOLdxBivJt5N/MHjfrvqoYbDJDP7zTc7u4pmOgjiAlnRIErXCJYFFtEK4bJEkteI00pwPz5DlMh5nFVwFylyvkOeMCnheDHGkxmUkeFwY4nd1T2a9hpVs8P6fIuCtZx34rysW9SbDoxrtrlE292JS0jTzsX2Bp6fyUDj2MXIOIWqTTEY2xwnGOoSxA/VCQ5+cDSwhEfVbFAR6eeag15KWYpuzQUxp94/aOYMt4/PePv4wuv7Jx6eXqBb0ru/Q5qyRMM+kMH1c0QZQ5gyuMEKssC8d0fpC/ptTt9BzxrqtuBy7v7N9/EN7ibEKZ/eyI8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"en\"\n        title=\"en\"\n        src=\"/static/1b703cd5a5dbe5d8ff867346521cf23f/e49a9/en.png\"\n        srcset=\"/static/1b703cd5a5dbe5d8ff867346521cf23f/01387/en.png 320w,\n/static/1b703cd5a5dbe5d8ff867346521cf23f/e49a9/en.png 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"辞書ファイルの指定\"><a href=\"#%E8%BE%9E%E6%9B%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%8C%87%E5%AE%9A\" aria-label=\"辞書ファイルの指定 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>辞書ファイルの指定</h1>\n<p>辞書ファイルは、外部の JSON ファイルを指定することができます。変換情報を切り出して管理できるようになり、スナップショットテストなどもしやすくなると思います。</p>\n<h2 id=\"辞書ファイルの作成\"><a href=\"#%E8%BE%9E%E6%9B%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"辞書ファイルの作成 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>辞書ファイルの作成</h2>\n<p>日本語と英語の 2 種類について作成してみましょう；</p>\n<div class=\"gatsby-code-title\">/src/locales/ja.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"言語を切り替え\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"言語を切り替え\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-code-title\">/src/locales/en.json</div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Welcome to React and react-i18next.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"言語を切り替え\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Change language\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"外部-json-ファイルの読み取り\"><a href=\"#%E5%A4%96%E9%83%A8-json-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A\" aria-label=\"外部 json ファイルの読み取り permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>外部 JSON ファイルの読み取り</h2>\n<p>webpack に頼って、JSON ファイルをインポートしてみます；</p>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> enJson <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/en.json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> jaJson <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/ja.json'</span><span class=\"token punctuation\">;</span>\n\ni18n<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>initReactI18next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  resources<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    en<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> translation<span class=\"token punctuation\">:</span> enJson <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    ja<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> translation<span class=\"token punctuation\">:</span> jaJson <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"実行-1\"><a href=\"#%E5%AE%9F%E8%A1%8C-1\" aria-label=\"実行 1 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実行</h2>\n<p>JSON ファイルから辞書情報を取得して表示ができるようになっているはずです；</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> start</code></pre></div>\n<h1 id=\"key-を自動で-json-ファイルに書き出す\"><a href=\"#key-%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7-json-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99\" aria-label=\"key を自動で json ファイルに書き出す permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>key を自動で JSON ファイルに書き出す</h1>\n<p>非常に面白い機能です。ラフに日本語で t 関数を書いていると、キー管理で抜け漏れが発生する可能性は当然あるのですが、その key を自動で抜き出して JSON ファイルに書き出してくれる機能があります。</p>\n<h2 id=\"babel-plugin-i18next-extract\"><a href=\"#babel-plugin-i18next-extract\" aria-label=\"babel plugin i18next extract permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>babel-plugin-i18next-extract</h2>\n<p>babel-plugin-i18next-extract パッケージを使うと、上記の JSON 書き出し機能が利用できるようになります；</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D babel-plugin-i18next-extract @babel/cli</code></pre></div>\n<p>babel プラグインとしての設定を記述します。設定した項目は 2 点です；</p>\n<ul>\n<li><strong>locales</strong>: 書き出しを行う言語セットです。</li>\n<li><strong>outputPath</strong>: 書き出すファイル名のパターンです。さきほどの手動辞書と同じ規則にしています。</li>\n</ul>\n<div class=\"gatsby-code-title\">/package.json</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"babel\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"react-app\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"i18next-extract\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token property\">\"locales\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ja\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"en\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token property\">\"outputPath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src/locales/{{locale}}.json\"</span></span>        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>書き出しを行うスクリプトを package.json へ追加します。引数に key を検索する対象ファイルのパターンを指定します；</p>\n<div class=\"gatsby-code-title\">/package.json</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token property\">\"i18next-extract\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NODE_ENV=development babel './src/**/*.{js,jsx,ts,tsx}'\"</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"コンポーネントの調整\"><a href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%AA%BF%E6%95%B4\" aria-label=\"コンポーネントの調整 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コンポーネントの調整</h2>\n<p>実際に key を抜き出してくれるかを実験するために、ひとつ key を追加してみます；</p>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>header className<span class=\"token operator\">=</span><span class=\"token string\">\"App-header\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ようこそ React と react-i18next へ。'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token operator\">&lt;</span>small<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'定義していない文字列'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>small<span class=\"token operator\">></span></span>      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLang</span><span class=\"token punctuation\">(</span>lang <span class=\"token operator\">===</span> <span class=\"token string\">'en'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ja'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'言語を切り替え'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>i18next の設定も、少し変更します；</p>\n<div class=\"gatsby-code-title\">/src/App.tsx</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">i18n<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>initReactI18next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  debug<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  resources<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    en<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> translation<span class=\"token punctuation\">:</span> enJson <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    ja<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> translation<span class=\"token punctuation\">:</span> jaJson <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  lng<span class=\"token punctuation\">:</span> <span class=\"token string\">'ja'</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  fallbackLng<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// フォールバックしない＝keyをそのまま表示</span></span><span class=\"gatsby-highlight-code-line\">  returnEmptyString<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 空文字での定義を許可</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"書き出し実行\"><a href=\"#%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97%E5%AE%9F%E8%A1%8C\" aria-label=\"書き出し実行 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>書き出し実行</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> i18next-extract</code></pre></div>\n<div class=\"gatsby-code-title\">/src/locales/ja.json</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">\"定義していない文字列\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></span>  <span class=\"token property\">\"言語を切り替え\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"言語を切り替え\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-code-title\">/src/locales/en.json</div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"ようこそ React と react-i18next へ。\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Welcome to React and react-i18next.\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token property\">\"定義していない文字列\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span></span>  <span class=\"token property\">\"言語を切り替え\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Change language\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>「定義していない文字列」が、空文字列の定義として出力されました。現状の設定(fallbackLng: false)であれば、i18next は空文字の定義を key 文字列にフォールバックして表示してくれるので、結果としては日本語の表示に代替されることになります。</p>\n<h2 id=\"表示テスト\"><a href=\"#%E8%A1%A8%E7%A4%BA%E3%83%86%E3%82%B9%E3%83%88\" aria-label=\"表示テスト permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示テスト</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> start</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c64665b90e70c9f2d0a3a61e4db9bb06/34e8a/ja2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz32S2U7CYBCF+xzEqBGklK0rlKKVsjRSZFVEkLBEMKLR6IWJMVEvfPFjZ0xJUePFZNrOmW/OP38FMaWDIpnNI5E21hFP6tiLZ7km+e/7koaoKPtZXWuiooJYQoGUyfl6jbUCFVyvi+pxG07tBG69A695hsvJAufDKRqtPpxqA2W3ifF0iWZ3gJqvmS9uMRjN0OuPYdk1FG2XhwhEl/UDdpiSTaSVArKaxd9ylsM5rZjIqBbMYgWqcchaxfiu62YJAYOyQDYDu8EzFaiBGum4NIiA5CCAyXqR1xJLqAgzhPDepIyBmL8ju1zH7GqFdm+IvO+Kph+VPRgFh1fSOR2h1buAlrcZFGZsACloSpBJTPtZ3txjdfeIyfya3dPFhEFBzy9gGCbxLcooVTy8vL7j7eMTD0/PfOSw7l/gXyL6LSI7IiLbIrZ2pY3mnzCKL2s1BFAQUTiuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ja2\"\n        title=\"ja2\"\n        src=\"/static/c64665b90e70c9f2d0a3a61e4db9bb06/34e8a/ja2.png\"\n        srcset=\"/static/c64665b90e70c9f2d0a3a61e4db9bb06/01387/ja2.png 320w,\n/static/c64665b90e70c9f2d0a3a61e4db9bb06/34e8a/ja2.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b48e3fc2120e1a5b75c1d0614c9bbae/34e8a/en2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABN0lEQVQoz3VRTU/CUBDsT9GIFGjB8tUvpLZFkAaKSENFqAEMaMJRL1zVu/7ksbsR8wJ4mEy7+2Z23j5JVqrIFiogPoacWvu3d0wr5Yt1KBcGiEUUSjqDDhGTMXG+WONvgpL+q5rJZ0hDNcmwfTytN5jMlhiNZ4xhNMVt9IDHxTPi6QL9YYzxZI4oTtJ+gmS+RtCP0BuMsVxtuD4YTXigRK7FspnC+mWTJ53ny5yc6vu3EBNTwlLFZuaEuz2IcK97CIf3qOhN1C0Xhu2h4bShWx4cP4DfCdH0ugc63uFuHyK8dp+vYF62oKST1bKNqumlAxw2dFs9NK46OKb9MxRf9EzWcJJRkVVqeHl7x/bjC9vPb0xXrzjNlpDJaQxRc2C43+DXTPfV8EO4N3fwuiMYTgB5L5GoIfwADeYGje/a1mUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"en2\"\n        title=\"en2\"\n        src=\"/static/6b48e3fc2120e1a5b75c1d0614c9bbae/34e8a/en2.png\"\n        srcset=\"/static/6b48e3fc2120e1a5b75c1d0614c9bbae/01387/en2.png 320w,\n/static/6b48e3fc2120e1a5b75c1d0614c9bbae/34e8a/en2.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1 id=\"完成品-1\"><a href=\"#%E5%AE%8C%E6%88%90%E5%93%81-1\" aria-label=\"完成品 1 permalink\" class=\"gatsby-autolink-headers\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完成品</h1>\n<p>実装したリポジトリはこちらです；</p>\n<p><a href=\"https://github.com/suzukalight/study-react-i18next\" target=\"_blank\" rel=\"noopener\">https://github.com/suzukalight/study-react-i18next</a></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2019-09-09-react-i18next/#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\">まえがき</a></p>\n<ul>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%AE%8C%E6%88%90%E5%93%81\">完成品</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83\">動作環境</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-09-09-react-i18next/#%E5%A4%9A%E8%A8%80%E8%AA%9E%E5%AF%BE%E5%BF%9C\">多言語対応</a></p>\n<ul>\n<li><a href=\"/2019-09-09-react-i18next/#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E6%AF%94%E8%BC%83\">ライブラリ比較</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97\">セットアップ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-09-09-react-i18next/#%E4%BD%BF%E3%81%84%E6%96%B9\">使い方</a></p>\n<ul>\n<li><a href=\"/2019-09-09-react-i18next/#%E7%BF%BB%E8%A8%B3%E5%AF%BE%E8%B1%A1%E3%81%AE%E6%8C%87%E5%AE%9A\">翻訳対象の指定</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E8%BE%9E%E6%9B%B8%E8%A8%AD%E5%AE%9A\">辞書設定</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E8%A8%80%E8%AA%9E%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88\">言語切り替え</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%AE%9F%E8%A1%8C\">実行</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-09-09-react-i18next/#%E8%BE%9E%E6%9B%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%8C%87%E5%AE%9A\">辞書ファイルの指定</a></p>\n<ul>\n<li><a href=\"/2019-09-09-react-i18next/#%E8%BE%9E%E6%9B%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\">辞書ファイルの作成</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%A4%96%E9%83%A8-json-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A\">外部 JSON ファイルの読み取り</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%AE%9F%E8%A1%8C-1\">実行</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2019-09-09-react-i18next/#key-%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7-json-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99\">key を自動で JSON ファイルに書き出す</a></p>\n<ul>\n<li><a href=\"/2019-09-09-react-i18next/#babel-plugin-i18next-extract\">babel-plugin-i18next-extract</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%AA%BF%E6%95%B4\">コンポーネントの調整</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97%E5%AE%9F%E8%A1%8C\">書き出し実行</a></li>\n<li><a href=\"/2019-09-09-react-i18next/#%E8%A1%A8%E7%A4%BA%E3%83%86%E3%82%B9%E3%83%88\">表示テスト</a></li>\n</ul>\n</li>\n<li><a href=\"/2019-09-09-react-i18next/#%E5%AE%8C%E6%88%90%E5%93%81-1\">完成品</a></li>\n</ul>","frontmatter":{"title":"react-i18nextで多言語対応（国際化・i18n）を素振り","date":"2019-09-09T00:02:00","description":null,"category":"Technology","tags":["i18n","react-i18next","react"],"hero":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz32S2U7CYBCF+xzEqBGklK0rlKKVsjRSZFVEkLBEMKLR6IWJMVEvfPFjZ0xJUePFZNrOmW/OP38FMaWDIpnNI5E21hFP6tiLZ7km+e/7koaoKPtZXWuiooJYQoGUyfl6jbUCFVyvi+pxG07tBG69A695hsvJAufDKRqtPpxqA2W3ifF0iWZ3gJqvmS9uMRjN0OuPYdk1FG2XhwhEl/UDdpiSTaSVArKaxd9ylsM5rZjIqBbMYgWqcchaxfiu62YJAYOyQDYDu8EzFaiBGum4NIiA5CCAyXqR1xJLqAgzhPDepIyBmL8ju1zH7GqFdm+IvO+Kph+VPRgFh1fSOR2h1buAlrcZFGZsACloSpBJTPtZ3txjdfeIyfya3dPFhEFBzy9gGCbxLcooVTy8vL7j7eMTD0/PfOSw7l/gXyL6LSI7IiLbIrZ2pY3mnzCKL2s1BFAQUTiuAAAAAElFTkSuQmCC","aspectRatio":2,"src":"/static/c64665b90e70c9f2d0a3a61e4db9bb06/d1858/ja2.png","srcSet":"/static/c64665b90e70c9f2d0a3a61e4db9bb06/7b192/ja2.png 320w,\n/static/c64665b90e70c9f2d0a3a61e4db9bb06/d1858/ja2.png 600w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"source":"github","slug":"/2019-09-09-react-i18next/","previous":{"head":{"title":"【一口馬主】キャロットクラブ新規入会・攻略成功のすべて","category":"競馬","tags":["競馬","キャロットクラブ","一口馬主"],"date":"2019-09-06T00:02:00","slug":"/2019-09-06-join-carrot-club/","source":"github"},"siteMetadata":{"title":"suzukalight.com"}},"next":{"head":{"title":"Storybookの最新フォーマット・Component Story Format(CSF)を試す","category":"Technology","tags":["storybook","csf","react","typescript"],"date":"2019-10-14T00:02:00","slug":"/2019-10-14-storybook-component-story-format/","source":"github"},"siteMetadata":{"title":"suzukalight.com"}}}}}